CMAKE_MINIMUM_REQUIRED( VERSION 2.8.8 )

# -----------------------------------------------
# Version
# -----------------------------------------------

SET(VERSION_MAJOR 2)
SET(VERSION_MINOR 0)
SET(VERSION_PATCH 0)
SET(PROJECT_VERSION ${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_PATCH})

# -----------------------------------------------
# Workarounds
# -----------------------------------------------

ADD_DEFINITIONS(-DASSIMP_BUILD_NO_IFC_IMPORTER )

# -----------------------------------------------
# Options
# -----------------------------------------------

option(BUILD_DEV "Build development package" OFF)
option(BUILD_LIB "Build main fillwave package" OFF)
option(BUILD_PACK "Build with external dependencies" OFF)
option(BUILD_DEB "Build deb packages" OFF)
option(BUILD_RPM "Build rpm packages" OFF)
option(FILLWAVE_COMPILATION_STARTUP_ANIMATION "Run startup animation before any other action" OFF)
option(FILLWAVE_COMPILATION_PC_GLES "Use GLES stub for PC" OFF)
option(NDEBUG "Build with debug logs" OFF)

# -----------------------------------------------
# Compiler options
# -----------------------------------------------

IF(${CMAKE_CXX_COMPILER_ID} STREQUAL "Clang")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
ELSEIF(${CMAKE_CXX_COMPILER_ID} STREQUAL "GNU")
    IF(WIN32)
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")
    ELSE(WIN32)
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
    ENDIF(WIN32)
ENDIF()

# -----------------------------------------------
# Directories
# -----------------------------------------------

set(FILLWAVE_PATH_INCLUDE "inc")
set(FILLWAVE_PATH_SOURCE "src")

set(FILLWAVE_PATH_SOURCE_ENGINE_CALLBACKS "actions/engine_callbacks")
set(FILLWAVE_PATH_SOURCE_ITEM_CALLBACKS "actions/item_callbacks")
set(FILLWAVE_PATH_SOURCE_EVENTS "actions/events")

set(FILLWAVE_PATH_SOURCE_CORE_BUFFERS "core/buffers")
set(FILLWAVE_PATH_SOURCE_CORE_RENDERING "core/rendering")
set(FILLWAVE_PATH_SOURCE_CORE_SHADING "core/pipeline")
set(FILLWAVE_PATH_SOURCE_CORE_TEXTURING "core/texturing")
set(FILLWAVE_PATH_SOURCE_CORE_OPERATIONS "core/operations")

set(FILLWAVE_PATH_SOURCE_EXTRAS "extras")
set(FILLWAVE_PATH_SOURCE_LOADERS "loaders")
set(FILLWAVE_PATH_SOURCE_MANAGEMENT "management")

set(FILLWAVE_PATH_SOURCE_MODELS "models")
set(FILLWAVE_PATH_SOURCE_MODELS_SHAPES "models/shapes")
set(FILLWAVE_PATH_SOURCE_MODELS_MESHES "models/meshes")

SET(FILLWAVE_PATH_SOURCE_PARTICLES "particles")
SET(FILLWAVE_PATH_SOURCE_SPACE "space")
SET(FILLWAVE_PATH_SOURCE_ANIMATION "animation")
SET(FILLWAVE_PATH_SOURCE_EFFECTS "effects")
SET(FILLWAVE_PATH_SOURCE_COMMON "common")
SET(FILLWAVE_PATH_SOURCE_TERRAIN "terrain")

# -----------------------------------------------
# Sources
# -----------------------------------------------

AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_ENGINE_CALLBACKS} GL_ENGINE_CALLBACKS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_ITEM_CALLBACKS} GL_ITEM_CALLBACKS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_EVENTS} GL_EVENTS_SOURCES)

AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_CORE_BUFFERS} GL_CORE_BUFFERS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_CORE_RENDERING} GL_CORE_RENDERING_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_CORE_SHADING} GL_CORE_SHADING_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_CORE_TEXTURING} GL_CORE_TEXTURING_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_CORE_OPERATIONS} GL_CORE_OPERATIONS_SOURCES)

AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_MODELS} GL_MODELS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_MODELS_SHAPES} GL_MODELS_SHAPES_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_MODELS_MESHES} GL_MODELS_MESHES_SOURCES)

AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_EXTRAS} GL_EXTRAS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_LOADERS} GL_LOADERS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_MANAGEMENT} GL_MANAGEMENT_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_PARTICLES} GL_PARTICLES_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_SPACE} GL_SPACE_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_ANIMATION} GL_ANIMATION_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_EFFECTS} GL_EFFECTS_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_COMMON} GL_COMMON_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_TERRAIN} GL_TERRAIN_SOURCES)
AUX_SOURCE_DIRECTORY(${FILLWAVE_PATH_SOURCE}/${FILLWAVE_PATH_SOURCE_LOADERS}/configs GL_SHADER_GENERATOR_SOURCES)

SET(FILLWAVE_SOURCES
     ${FILLWAVE_PATH_SOURCE}/OpenGL.cpp
     ${FILLWAVE_PATH_SOURCE}/core/GLObject.cpp
     ${FILLWAVE_PATH_SOURCE}/Fillwave.cpp
     ${GL_ENGINE_CALLBACKS_SOURCES}
     ${GL_ITEM_CALLBACKS_SOURCES}
     ${GL_EVENTS_SOURCES}
     ${GL_CORE_BUFFERS_SOURCES}
     ${GL_CORE_RENDERING_SOURCES}
     ${GL_CORE_SHADING_SOURCES}
     ${GL_CORE_TEXTURING_SOURCES}
     ${GL_CORE_OPERATIONS_SOURCES}
     ${GL_EXTRAS_SOURCES}
     ${GL_LOADERS_SOURCES}
     ${GL_MANAGEMENT_SOURCES}
     ${GL_MODELS_SOURCES}
     ${GL_MODELS_SHAPES_SOURCES}
     ${GL_MODELS_MESHES_SOURCES}
     ${GL_SPACE_SOURCES}
     ${GL_PICOPNG_SOURCES}
     ${GL_ANIMATION_SOURCES}
     ${GL_EFFECTS_SOURCES}
     ${GL_FONTGENERATOR_SOURCES}
     ${GL_PARTICLES_SOURCES}
     ${GL_COMMON_SOURCES}
     ${GL_TERRAIN_SOURCES}
     ${GL_SHADER_GENERATOR_SOURCES}
     )

# -----------------------------------------------
# Platform
# -----------------------------------------------

IF(UNIX AND NOT ANDROID AND NOT APPLE)
   include(cmake/platform/Linux.cmake)
ENDIF(UNIX AND NOT ANDROID AND NOT APPLE)

IF(ANDROID)
   include(cmake/platform/Android.cmake)
ENDIF(ANDROID)

IF(APPLE)
   include(cmake/platform/OSX.cmake)
ENDIF(APPLE)

IF(WIN32)
   include("cmake/platform/Windows.cmake")
ENDIF(WIN32)

CONFIGURE_FILE(
"${CMAKE_CURRENT_SOURCE_DIR}/cmake/Config.h.in"
"${CMAKE_CURRENT_SOURCE_DIR}/inc/fillwave/Config.h"
)
SET(CMAKE_EXTRA_INCLUDE_FILES)
